# -*- coding: utf-8 -*-
# Generated by Django 1.11 on 2018-09-11 06:08
from __future__ import unicode_literals

from django.db import migrations, models


def fix_already_submitted(apps, schema_editor):
    EvaluationAssignment = apps.get_model("peer_evaluation", "EvaluationAssignment")
    for evaluation in EvaluationAssignment._default_manager.all():
        if evaluation.contents.exists():
            evaluation.submitted = True
            evaluation.save()


class Migration(migrations.Migration):

    dependencies = [("peer_evaluation", "0005_auto_20180905_1110")]

    operations = [
        migrations.AddField(
            model_name="evaluationassignment",
            name="submitted",
            field=models.BooleanField(default=False),
        ),
        migrations.RunPython(fix_already_submitted),
    ]
